<p>
  <% if flash[:notice] %>
    <%= flash[:notice] %>
  <% end %>
</p>
    
<h1>課題6-1</h1>
  <h class="login_user"><%= session[:login_uid] %>でログイン中です。</h>
  <p></p>


<p><% @tweets.each do |e| %></p>
    <hr width="100%">
    <h class="user_name"><%= User.find_by(id: e["user_id"]).uid %></h>
    <p class ="message"><%= e["message"] %></p>
    <p>
      <% if (Time.now-e["tdate"]).div(60) >= 1440 %>
        <%= (Time.now-e["tdate"]).div(86400) %>日前
      <% elsif (Time.now-e["tdate"]).div(60) >= 60 %>
        <%= (Time.now-e["tdate"]).div(3600) %>時間前
      <% elsif %>
        <%= (Time.now-e["tdate"]).div(60) %>分前
      <% end %>
    </p>
    <%= link_to '削除', "/tweets/#{e.id}", method: :delete %>
    <% if e.likes.count == 0 %>
      <%= link_to 'いいね', likes_path(tweet_id: e.id), method: :post %>
    <% else %>
      <%= link_to 'いいね削除', like_path(e), method: :delete %>
    <% end %>
<% end %>
<hr width="100%">
<p><%= link_to 'ログイン', '/top/main'  %></p>
<p><%= link_to 'ユーザ登録', '/users/new'  %></p>
<p><%= link_to 'ユーザ一覧', '/users/list' %></p>
<p>
  <% if session[:login_uid] %>
    <%= link_to '新規Tweet', '/tweets/new' %>
  <% else %>
    新規Tweetするにはログインしてください。
<% end %></p>